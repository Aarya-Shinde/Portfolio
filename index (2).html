<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Falling Deck of Cards</title>
  <style>
    body {
      margin: 0;
      background: radial-gradient(ellipse at center, #232526 0%, #1c1c1c 100%);
      overflow: hidden;
      height: 100vh;
    }
    .card {
      position: absolute;
      width: 90px;
      height: 130px;
      background: linear-gradient(135deg, #fff 80%, #f0f0f0 100%);
      border-radius: 14px;
      box-shadow: 0 10px 32px rgba(0,0,0,0.35), 0 1.5px 0 #bbb inset;
      border: 2.5px solid #e0e0e0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      font-family: 'Segoe UI', 'Arial', sans-serif;
      animation: fall linear;
      user-select: none;
      pointer-events: none;
      transition: box-shadow 0.2s;
    }
    .card .corner {
      font-size: 1.1em;
      font-weight: bold;
      position: absolute;
      left: 8px;
      top: 8px;
      text-align: left;
      line-height: 1.1;
      letter-spacing: 0.02em;
    }
    .card .corner.bottom {
      left: unset;
      right: 8px;
      top: unset;
      bottom: 8px;
      text-align: right;
      transform: rotate(180deg);
    }
    .card .suit-center {
      font-size: 2.7em;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      opacity: 0.7;
      pointer-events: none;
      filter: drop-shadow(0 1px 2px #aaa);
    }
    .card.red {
      color: #e74c3c;
      border-color: #f8caca;
      background: linear-gradient(135deg, #fff 70%, #ffeaea 100%);
    }
    .card.black {
      color: #222;
      border-color: #d0d0d0;
    }
    @keyframes fall {
      0% {
        top: -160px;
        opacity: 0.92;
        transform: rotate(var(--rotate-start)) scale(1.03);
      }
      100% {
        top: 110vh;
        opacity: 0.18;
        transform: rotate(var(--rotate-end)) scale(0.98);
      }
    }
  </style>
</head>
<body>
  <script>
    const suits = [
      { symbol: '♠', name: 'spades', color: 'black' },
      { symbol: '♥', name: 'hearts', color: 'red' },
      { symbol: '♦', name: 'diamonds', color: 'red' },
      { symbol: '♣', name: 'clubs', color: 'black' }
    ];
    const values = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];

    function randomBetween(a, b) {
      return Math.random() * (b - a) + a;
    }

    // Track recent card positions
    const recentPositions = [];
    const minDistance = 110; // px, slightly more than card width

    function getNonOverlappingLeft() {
      let left, attempts = 0, maxAttempts = 20;
      do {
        left = randomBetween(10, window.innerWidth - 100);
        attempts++;
      } while (
        recentPositions.some(pos => Math.abs(pos - left) < minDistance) &&
        attempts < maxAttempts
      );
      // Keep only last 8 positions
      recentPositions.push(left);
      if (recentPositions.length > 8) recentPositions.shift();
      return left;
    }

    function createCard() {
      const card = document.createElement('div');
      card.className = 'card';

      // Pick suit and value
      const suitObj = suits[Math.floor(Math.random() * suits.length)];
      const value = values[Math.floor(Math.random() * values.length)];

      card.classList.add(suitObj.color);

      // Corners
      const cornerTL = document.createElement('div');
      cornerTL.className = 'corner';
      cornerTL.innerHTML = value + '<br>' + suitObj.symbol;
      card.appendChild(cornerTL);

      const cornerBR = document.createElement('div');
      cornerBR.className = 'corner bottom';
      cornerBR.innerHTML = value + '<br>' + suitObj.symbol;
      card.appendChild(cornerBR);

      // Center suit
      const suitCenter = document.createElement('div');
      suitCenter.className = 'suit-center';
      suitCenter.textContent = suitObj.symbol;
      card.appendChild(suitCenter);

      // Non-overlapping horizontal position
      card.style.left = getNonOverlappingLeft() + 'px';

      // Random animation duration and delay
      const duration = randomBetween(2.2, 4.5);
      card.style.animationDuration = duration + 's';
      card.style.animationDelay = randomBetween(0, 1.5) + 's';

      // Random rotation
      card.style.setProperty('--rotate-start', randomBetween(-25, 25) + 'deg');
      card.style.setProperty('--rotate-end', randomBetween(-80, 80) + 'deg');

      document.body.appendChild(card);

      // Remove card after animation
      card.addEventListener('animationend', () => card.remove());
    }

    // Remove all cards if window resizes (prevents stuck cards)
    window.addEventListener('resize', () => {
      document.querySelectorAll('.card').forEach(card => card.remove());
      recentPositions.length = 0;
    });

    // Create cards at intervals
    setInterval(createCard, 320);
  </script>
</body>
</html>